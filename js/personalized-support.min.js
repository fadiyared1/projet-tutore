jQuery(document).ready(function ($) {
	sendFeedbackOnClick($);

	feedbackExplanation($);
});

function feedbackExplanation($) {
	$(".more").toggle(function () {
		$(this).text("Réduire").siblings(".complete").show();
	}, function () {
		$(this).text("Cliquer pour plus de détails").siblings(".complete").hide();
	});
}

function sendFeedbackOnClick($) {
	$('.feedback-container').each(function (obj) {
		var dataset = obj.dataset;
		dataset['value'] = currentSelectedOption.value;

		$.ajax({
			url: personalizedSupport.ajaxUrl,
			data: {
				'action': personalizedSupport.sendFeedback,
				'dataset': dataset,
				'nonce': personalizedSupport.nonce
			},
			success: function (data) {
				// This outputs the result of the ajax request
				console.log(data);
			},
			error: function (errorThrown) {
				console.log(errorThrown);
			}
		});
	});
}
